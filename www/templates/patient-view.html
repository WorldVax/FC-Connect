<ion-view>
    <ion-nav-title>
        <span ng-show="vm._id">{{vm.identity.lastName}}, {{vm.identity.firstName}}</span>
        <span ng-hide="vm._id">FC-Connect</span>
    </ion-nav-title>
    <ion-nav-buttons side="secondary">
        <button ng-show="vm._id" class="button ion-edit button-clear" ng-click="startEdit()"></button>
    </ion-nav-buttons>
    <ion-content class="padding">
        <button ng-show="vm._id" class="button ion-plus button-positive button-fab button-fab-bottom-right" ng-click="startVaccination()"></button>
        <div ng-show="vm._id" class="list">
            <ion-item class="item item-divider">
                Patient Information
            </ion-item>
            <div class="item">
                <img ng-src="{{vm.identity.picture}}" style="width: 64px; height: 64px" onerror="this.onerror=null;this.src='img/unknown-90x100.jpg';" ng-click="viewImage()">
                <div class="row">
                    <div class="col-25">SSN</div>
                    <div class="col">{{vm.identity.ssn}}</div>
                </div>
                <div class="row">
                    <div class="col-25">Gender</div>
                    <div class="col">{{vm.identity.gender}}</div>
                </div>
                <div class="row">
                    <div class="col-25">Birth Date</div>
                    <div class="col">{{vm.identity.dob}}</div>
                </div>
                <div class="row">
                    <div class="col-25">Street</div>
                    <div class="col">{{vm.address.street}}</div>
                </div>
                <div class="row">
                    <div class="col-25">City</div>
                    <div class="col">{{vm.address.city}}</div>
                </div>
                <div class="row">
                    <div class="col-25">State</div>
                    <div class="col">{{vm.address.state}}</div>
                </div>
                <div class="row">
                    <div class="col-25">Postal Code</div>
                    <div class="col">{{vm.address.postalCode}}</div>
                </div>
                <div class="row">
                    <div class="col-25">Phone</div>
                    <div class="col">
                        <div>
                            <div class="row" ng-repeat="(key, value) in vm.contact.phone">
                                <div class="col">{{key}}</div>
                                <div class="col">{{value}}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-25">Email</div>
                    <div class="col">
                        <div>
                            <div class="row" ng-repeat="(key, value) in vm.contact.email">
                                <div class="col">{{key}}</div>
                                <div class="col">{{value}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <ion-item class="item item-divider">
                Medical History
            </ion-item>
            <ion-list class="item">
                <ion-item ng-repeat="rec in vm.medical.history" class="card">
                    <div class="item item-divider">Code: {{rec.code}} CodeSys: {{rec.codeSys}}</div>
                    <div class="item item-text-wrap">{{rec.text}}</div>
                </ion-item>
            </ion-list>
            <ion-item class="item item-divider">
                Immunizations
            </ion-item>
            <ion-list class="item">
                <ion-item ng-repeat="rec in vm.medical.series" class="card">
                    <div class="item item-divider">CVX Code: {{rec.Cvx}} Name: {{rec.VaccineName}} </div>
                    <div class="item item-text-wrap">Date Administered: {{rec.DateAdministered}}</div>
                </ion-item>
            </ion-list>
        </div>
        <div ng-hide="vm._id">
            No patient record has been selected.
        </div>
    </ion-content>
</ion-view>